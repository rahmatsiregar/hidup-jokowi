<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>hidup-jokowi</title>

  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: linear-gradient(135deg, #0f172a, #1e293b);
      color: white;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      overflow: hidden;
    }

    .card {
      background: #111827;
      padding: 30px;
      border-radius: 18px;
      text-align: center;
      width: min(420px, 92vw);
      box-shadow: 0 0 25px rgba(0,0,0,0.6);
      animation: fadeIn 0.5s ease;
      position: relative;
      z-index: 10;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(18px); }
      to { opacity: 1; transform: translateY(0); }
    }

    img.gif {
      width: 220px;
      border-radius: 12px;
      margin-bottom: 14px;
    }

    h2 { line-height: 1.5; margin-bottom: 18px; white-space: pre-line; }

    button {
      margin: 6px;
      padding: 10px 20px;
      border: none;
      border-radius: 10px;
      font-size: 14px;
      cursor: pointer;
      background: #ec4899;
      color: white;
      transition: 0.2s;
    }

    button:hover { transform: scale(1.05); background: #db2777; }

    .maybe { background: #8b5cf6; }
    .maybe:hover { background: #7c3aed; }

    .secondary { background: #374151; }
    .secondary:hover { background: #4b5563; }

    .options { display: grid; gap: 10px; margin-top: 10px; }

    .wa-btn { background: #22c55e; }
    .wa-btn:hover { background: #16a34a; }

    .typing {
      border-right: 2px solid #fff;
      white-space: nowrap;
      overflow: hidden;
      width: 0;
      animation: typing 2.2s steps(12, end) forwards, blink 0.8s infinite;
      margin-bottom: 20px;
      font-size: 22px;
    }

    @keyframes typing {
      from { width: 0; }
      to { width: 110px; }
    }

    @keyframes blink {
      50% { border-color: transparent; }
    }

    .firework {
      position: fixed;
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: #ffd166;
      pointer-events: none;
      animation: explode 0.9s ease-out forwards;
      z-index: 1;
    }

    @keyframes explode {
      0% { transform: scale(0.5); opacity: 1; }
      100% { transform: translate(var(--dx), var(--dy)) scale(1.8); opacity: 0; }
    }
  </style>
</head>

<body>
  <div class="card" id="app"></div>

  <script>
    const MY_NUMBER = "6281316310496";
    const SHEET_ENDPOINT = "https://script.google.com/macros/s/AKfycbyhc0VQTthbBDEpksw9fUMlCAvrivelIb85Fnp3xPmnkpv0D2U5Rki7ACtjeq06Gckndg/exec";

    const steps = [
      { type: "question", text: "can i ask u something small...?", gif: "https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExazg1OG5qNHBva2VjNmJ4NzY4a3J4ZXRjemx4YWhrbnY1d3h4ODZyYyZlcD12MV9naWZzX3NlYXJjaCZjdD1n/aE7wJrIV0qeLEKKrjn/giphy.gif" },
      { type: "question", text: "do you feel comfortable talking with me?", gif: "https://media.giphy.com/media/3oriO0OEd9QIDdllqo/giphy.gif" },
      { type: "question", text: "do you like the time we spend talking?", gif: "https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExbmltdzJqa2x5dnd3aWxtYnBrZ215aTQ4Zm1mM2tsaDN3NXVtZnloNCZlcD12MV9naWZzX3NlYXJjaCZjdD1n/n5iPVLeA1fvb0IYU5W/giphy.gif" },
      { type: "question", text: "do our conversations make your day a little better?", gif: "https://media.giphy.com/media/v1.Y2lkPWVjZjA1ZTQ3YzQ4Yml5Y3N4NWlzcThkdzUyenFtbHZpMHEwaDNtZDBtMWloa2liNSZlcD12MV9naWZzX3NlYXJjaCZjdD1n/1ViLp0GBYhTcA/giphy.gif" },
      { type: "question", text: "would you like to spend some time together outside of chat?", gif: "https://media.giphy.com/media/13borq7Zo2kulO/giphy.gif" },
      { type: "question", text: "if i asked you to go out sometime, would that be okay?", gif: "https://media.giphy.com/media/paf7IOKOacbzPinHQC/giphy.gif" },

      { type: "choice", key: "place", text: "if we go out‚Ä¶ where feels nicest to you?", options: [
          { label: "Cozy caf√© ‚òï", value: "cafe" },
          { label: "Evening city walk üåÜ", value: "city" },
          { label: "Quiet park üåø", value: "park" },
          { label: "Beach sunset üåä", value: "beach" }
      ]},

      { type: "choice", key: "vibe", text: "what kind of feeling would you like that moment to have?", options: [
          { label: "soft and calm üåô", value: "calm" },
          { label: "playful and fun ‚ú®", value: "fun" },
          { label: "deep and meaningful üí¨", value: "deep" },
          { label: "a little personal and more deep ‚úåÔ∏è", value: "romantic" }
      ]},

      { type: "choice", key: "activity", text: "and‚Ä¶ what should we do there?", options: [
          { label: "just talk and laugh üòä", value: "talk" },
          { label: "walk around together üö∂", value: "walk" },
          { label: "eat something nice üç∞", value: "eat" },
          { label: "go home instantly bcs of tiredness üòπ", value: "together" }
      ]},

      { type: "final", text: "So‚Ä¶ would you like to go out with me?", gif: "https://media.giphy.com/media/v1.Y2lkPWVjZjA1ZTQ3Zmx3eG1rNDAzcW82MXh0ODR6Mjk3dGlpaWZ6Z2Z5NnVodnY4Z2ZwdCZlcD12MV9naWZzX3NlYXJjaCZjdD1n/QZpDATBs8QzcLZo9uI/giphy.gif" }
    ];

    let step = 0;
    let score = 0;
    let yesCount = 0;
    let maybeCount = 0;
    let prefs = {};

    const app = document.getElementById("app");

    function renderIntro() {
      app.innerHTML = `<div class="typing">hai bina....</div><button onclick="startQuiz()">Next</button>`;
    }

    function startQuiz() { render(); }

    function render() {
      const s = steps[step];
      const gifHTML = s.gif ? `<img class="gif" src="${s.gif}" />` : "";

      if (s.type === "question" || s.type === "final") {
        app.innerHTML = `${gifHTML}<h2>${s.text}</h2>
          <button onclick="answer(2)">Yes</button>
          <button class="maybe" onclick="answer(1)">Maybe</button>
          <button class="secondary" onclick="answer(0)">No</button>`;
      }

      if (s.type === "choice") {
        const buttons = s.options.map(o => `<button onclick="choose('${s.key}','${o.value}')">${o.label}</button>`).join("");
        app.innerHTML = `<h2>${s.text}</h2><div class="options">${buttons}</div>`;
      }
    }

    function answer(value) {
      score += value;
      if (value === 2) yesCount++;
      if (value === 1) maybeCount++;

      step++;
      if (step < steps.length) render(); else showResult();
    }

    function choose(key, value) {
      prefs[key] = value;
      step++;
      render();
    }

    async function sendToSheet() {
      if (!SHEET_ENDPOINT.includes("http")) return;

      try {
        await fetch(SHEET_ENDPOINT, {
          method: "POST",
          mode: "no-cors",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            time: new Date().toISOString(),
            score: score,
            yesCount: yesCount,
            maybeCount: maybeCount,
            place: prefs.place || "",
            vibe: prefs.vibe || "",
            activity: prefs.activity || ""
          })
        });
      } catch (err) {
        console.log("sheet error", err);
      }
    }

    function showResult() {
      let message = "";

      if (score >= 10)
        message = "I‚Äôd really like to take you out, how about 14 feb? If you feel the same, I‚Äôll be happy to hear from you.";
      else if (score >= 5)
        message = "No pressure at all‚Ä¶ maybe we can just keep talking and see where it goes.";
      else
        message = "why u try to retake and choose no on every question lmao so got u üòπüòπüòπ.";

      sendToSheet();

      const waLink = `https://wa.me/${MY_NUMBER}`;

      app.innerHTML = `
        <h2>${message}</h2>
        ${score >= 5 ? `<button class="wa-btn" onclick="window.open('${waLink}','_blank')">text me hehe üí¨</button>` : ""}
      `;
    }

    function spawnFireworks() {
      setInterval(() => {
        const x = Math.random() * window.innerWidth;
        const y = Math.random() * window.innerHeight * 0.6;

        for (let i = 0; i < 12; i++) {
          const f = document.createElement("div");
          f.className = "firework";
          f.style.left = x + "px";
          f.style.top = y + "px";

          const angle = Math.random() * Math.PI * 2;
          const dist = 40 + Math.random() * 40;

          f.style.setProperty("--dx", Math.cos(angle) * dist + "px");
          f.style.setProperty("--dy", Math.sin(angle) * dist + "px");

          document.body.appendChild(f);
          setTimeout(() => f.remove(), 900);
        }
      }, 900);
    }

    spawnFireworks();
    renderIntro();
  </script>
</body>
</html>
